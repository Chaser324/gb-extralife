// Generated by CoffeeScript 1.6.3
/* CONSTANTS*/var BANNER_HEIGHT,CHAT_TAB_HEIGHT,CHAT_WIDTH,HEIGHT_LARGE,HEIGHT_MED,HEIGHT_SMALL,IRC_URL,PLAYER_URL,STREAM_API_URL,STREAM_UPDATE_RATE,TOTAL_UPDATE_RATE,WIDTH_LARGE,WIDTH_MED,WIDTH_SMALL,addPlayer,attributes,currentChat,currentLayout,doResize,embedPlayer,flashvars,getChatUrl,getURLParameter,initEvents,initIndex,initPage,layoutChat,layoutChatNav,layoutElement,layoutPlayerSlot,layouts,loadChat,newAlerts,onAirStreamCount,params,refreshAlerts,refreshOnAirCount,refreshStream,removePlayer,setCoords,setupLayout,stream1Loaded,stream2Loaded,stream3Loaded,swapStream,toggleChat,updateTotal,users;PLAYER_URL="//www-cdn.jtvnw.net/swflibs/TwitchPlayer.swf";STREAM_API_URL="https://api.twitch.tv/kraken/streams/";IRC_URL="http://webchat.quakenet.org/?channels=gbendurancerun&uio=MT1mYWxzZSY4PWZhbHNlJjExPTM2OSYxMz1mYWxzZSYxND1mYWxzZQfc";CHAT_WIDTH=300;CHAT_TAB_HEIGHT=42;WIDTH_LARGE=0;HEIGHT_LARGE=0;WIDTH_MED=0;HEIGHT_MED=0;WIDTH_SMALL=0;HEIGHT_SMALL=0;BANNER_HEIGHT=252;TOTAL_UPDATE_RATE=3e5;STREAM_UPDATE_RATE=9e4;flashvars={enable_javascript:"true",fullscreen_click:"true",video_width:"427",video_height:"240",embed:1,initCallback:"",channel:""};params={allowFullScreen:"true",allowscriptaccess:"always",wmode:"opaque"};attributes={"class":"layoutElement"};users={1:{username:"Matt",fund:"http://www.extra-life.org/participant/pascual",stream:"mattpascual",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/50/1713152-avatar.png"},2:{username:"Happenstance",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=45198",stream:"happenstanceuk",profilePic:"http://static.giantbomb.com/uploads/square_mini/13/132030/2445765-6184784399-norma.jpg"},3:{username:"Chaser324",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=45793",stream:"chasepettit",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/2840/961540-profile.png"},4:{username:"Crispy",fund:"http://www.extra-life.org/participant/Crispy",stream:"CrispyLovesYou",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/1587/1095730-nekkiddave.jpg"},5:{username:"TheFakePsychic",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=51960",stream:"thefakepsychic",profilePic:"http://static.giantbomb.com/uploads/square_mini/12/121659/2550653-naoto+winter+icon.png"},6:{username:"thdemn",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=51931",stream:"grtnpwrflgary",profilePic:"http://static.giantbomb.com/uploads/square_mini/14/148764/2345749-8_bit_cody.gif"},7:{username:"IrrelevantJohn",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=51999",stream:"lleg3nd",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/209/2351454-icon1.png"},8:{username:"ArclightBorealis",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=47921",stream:"arclightborealis",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/7785/2531220-avatar.png"},9:{username:"Fattony12000",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=45819",stream:"fattony12000",profilePic:"http://static.giantbomb.com/uploads/square_mini/8/88760/2190087-max_opp_crop.jpg"},10:{username:"Rincewind",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=52246",stream:"rincewind_uk",profilePic:"http://static.giantbomb.com/uploads/square_mini/8/87446/2511144-2510225-taswell.jpg"},11:{username:"zolloz89",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=48386",stream:"zolloz89",profilePic:"http://static.giantbomb.com/uploads/square_mini/8/87446/2511144-2510225-taswell.jpg"},12:{username:"RandyF",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=50573",stream:"rabdt",profilePic:"http://static.giantbomb.com/uploads/square_mini/7/79739/1293428-120px_smw_mario_holding_a_shell.jpg"},13:{username:"Skytylz",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=52622",stream:"skytylz",profilePic:"http://static.giantbomb.com/uploads/square_mini/2/29721/2509953-2459536-2135100-2135095-newavatar.jpg"},14:{username:"GullumF",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=52603",stream:"GullumF",profilePic:"http://static.giantbomb.com/uploads/square_mini/5/59857/1147869-avatar_body.png"},15:{username:"mwjeffcott",fund:"http://www.extra-life.org/participant/mwjeffcott",stream:"mwjeffcott",profilePic:"http://static.giantbomb.com/uploads/square_mini/3/37622/1059624-playstation_1_one_sony_audiophile_cd_player_transport_rca_1.jpg"},16:{username:"jArmAhead",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=52756",stream:"ajarmahead",profilePic:"http://static.giantbomb.com/uploads/square_mini/3/37622/1059624-playstation_1_one_sony_audiophile_cd_player_transport_rca_1.jpg"},17:{username:"Danteveli",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=52909",stream:"danteveli24",profilePic:"http://static.giantbomb.com/uploads/square_mini/9/95390/2463117-develi.jpg"},18:{username:"coribald",fund:"http://www.extra-life.org/index.cfm?fuseaction=donordrive.participant&participantID=52939",stream:"coribald",profilePic:"http://static.giantbomb.com/uploads/square_mini/14/140836/2205878-2205876-c4zcg.jpg"},19:{username:"shinboy630",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=52918",stream:"shinboy630",profilePic:"http://static.giantbomb.com/uploads/square_mini/14/142023/2455540-2455538-8722972267-cyberp.jpeg"},20:{username:"busted1der",fund:"http://www.extra-life.org/index.cfm?fuseaction=donordrive.participant&participantID=48731",stream:"JacobMcCourt",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/8525/2207947-2207946-img_20120319_00080.jpg"},21:{username:"PXAbstraction",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=47415",stream:"PXAbstraction",profilePic:"http://static.giantbomb.com/uploads/square_mini/1/17949/1917373-pxaavatar.jpg"},22:{username:"Sparklykiss",fund:"http://www.extra-life.org/participant/Sparklykiss",stream:"sparklykiss",profilePic:"http://static.giantbomb.com/uploads/square_mini/6/63338/2141065-sparklykisspony.png"},23:{username:"Confirm4Crit",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=53737",stream:"confirm4crit",profilePic:"http://static.giantbomb.com/uploads/square_mini/15/151224/2510387-14ysjt.png"},24:{username:"subrandom",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=46734",stream:"subrandom",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/191/1322646-objection.png"},25:{username:"TonyBlue87",fund:"http://www.extra-life.org/team/happyhourimprov",stream:"happyhourimprov",profilePic:"http://static.giantbomb.com/uploads/square_mini/7/71314/1724240-sparkster_tron.png"},26:{username:"Nickieroonie",fund:"http://www.extra-life.org/participant/nickieroonie",stream:"nickieroonie",profilePic:"http://static.giantbomb.com/uploads/square_mini/11/116307/1645548-metadp.jpg"},27:{username:"LaserJesus",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=54268",stream:"lasermessiah",profilePic:"http://static.giantbomb.com/uploads/square_mini/9/91592/1351458-ljriflesteam.jpg"},28:{username:"datarez",fund:"http://www.extra-life.org/participant/datarez",stream:"datarez",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/1592/1542722-ned_stark_game_of_thrones.jpg"},29:{username:"RioStarwind",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=54461",stream:"riostarwind",profilePic:"http://static.giantbomb.com/uploads/square_mini/5/56971/2380994-images.jpg"},30:{username:"KingRingtail85",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=54458",stream:"jeff_mcfly",profilePic:"http://static.giantbomb.com/uploads/square_mini/6/66397/2533827-daft-punk-helmets-columbia-album-artwork.jpg"},31:{username:"eccentrix",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=54707",stream:"eccentrix",profilePic:"http://static.giantbomb.com/uploads/square_mini/6/65153/1325815-77522907342156928d992e8he.gif"},32:{username:"Capaneus",fund:"http://www.extra-life.org/index.cfm?fuseaction=donordrive.participant&participantID=53121",stream:"capane_us",profilePic:"http://static.giantbomb.com/uploads/square_mini/11/110891/2522906-metroid4_07.png"},33:{username:"Squill2k4",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=54767",stream:"squill2k4",profilePic:"http://static.giantbomb.com/uploads/square_mini/15/156838/2386706-rebel_alliance_logo.svg.png"},34:{username:"B0nd07",fund:"http://www.extra-life.org/participant/b0nd07",stream:"b0nd07",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/8991/2274238-avatar3.png"},35:{username:"FCDRandy",fund:"http://www.extra-life.org/participant/ScrubbestLeague",stream:"ScrubbestLeague",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/22/176637-default.png"},36:{username:"alanm26v5",fund:"http://www.extra-life.org/participant/alanm26",stream:"alanm26",profilePic:"http://static.giantbomb.com/uploads/square_mini/12/128530/1762493-20012.png"},37:{username:"thefishofwisdom",fund:"http://www.extra-life.org/participant/thefishofwisdom",stream:"thefishofwisdom",profilePic:"http://static.giantbomb.com/uploads/square_mini/12/129764/1778606-dilbert.png"},38:{username:"taco484",fund:"http://www.extra-life.org/index.cfm?fuseaction=donordrive.participant&participantID=57388",stream:"taco484",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/6806/881406-untitled.png"},39:{username:"KarthasMI",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=59384",stream:"Light_Hill",profilePic:"http://static.giantbomb.com/uploads/square_mini/10/101958/2087518-dwarf2.jpg"},40:{username:"zinchalk",fund:"http://www.extra-life.org/index.cfm?fuseaction=donordrive.participant&participantID=59705",stream:"zinchalk",profilePic:"http://static.giantbomb.com/uploads/square_mini/13/136355/2343488-guy_smiley.jpg"},41:{username:"StarvingPoet",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=59939",stream:"gamersgivingback",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/22/176637-default.png"},42:{username:"Danimo",fund:"www.extra-life.org/participant/danimo",stream:"danimo25",profilePic:"http://static.giantbomb.com/uploads/square_mini/16/164155/2520889-gardner.jpg"},43:{username:"Dolphin_Butter",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=61579",stream:"dolphinbutter",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/6384/240311-kirby_sleeping_icon.jpg"},44:{username:"Messier",fund:"http://www.extra-life.org/participant/TJWilkinson",stream:"tjwilkinson",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/9351/1325802-nhl_ap_messier_580.jpg"},45:{username:"cadwr",fund:"http://www.extra-life.org/participant/Cadwr",stream:"cadwr0",profilePic:"http://static.giantbomb.com/uploads/square_mini/11/116634/2107379-598968c9a4fe075013fe74c2528213354c4c3511_full.jpg"},46:{username:"TheSouthernDandy",fund:"www.extra-life.org/participant/snagglewolf",stream:"thesnagglewolf",profilePic:"http://static.giantbomb.com/uploads/square_mini/9/99864/2462709-vxhxjec.png"},47:{username:"DwigtK",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=45268",stream:"dwigtk",profilePic:"http://static.giantbomb.com/uploads/square_mini/11/117250/1625284-dwight__2_.jpg"},48:{username:"HoppusMaximus",fund:"http://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=64412",stream:"brandonr785",profilePic:"http://static.giantbomb.com/uploads/square_mini/0/22/176637-default.png"}};currentLayout="";currentChat=IRC_URL;onAirStreamCount=0;newAlerts=[];layouts=null;initPage=function(){var e,t,n,r,i,s,o,u;r=getURLParameter("1");i=getURLParameter("2");s=getURLParameter("3");t=getURLParameter("layout");o=!1;if(r!==null){playerChannels.stream1=r;o=!0}if(i!==null){playerChannels.stream2=i;o=!0}if(s!==null){playerChannels.stream3=s;o=!0}t===null&&(t="threeUp");$("#chat1").show();e=$.cookie("first_visit");if(!e){$.cookie("first_visit","true",{expires:3,path:"/"});$(".first-alert").show()}else{newAlerts.push("<strong>Welcome Back!</strong>");newAlerts.push('The Giant Bomb Extra Life marathon rages on! Don\'t forget to <strong><a href="http://www.extra-life.org/team/giantbomb">DONATE</a></strong>.')}for(n in playerChannels){u=playerChannels[n];addPlayer(u,n)}return setupLayout(t)};initEvents=function(){$(".alert").bind("closed.bs.alert",function(){return setTimeout(doResize,100)});setTimeout(updateTotal,15e3);$("a[href='#info-content']").click(function(){$("#content-nav li a.active").removeClass("active");$("#content-nav li a[href='#info-content']").addClass("active");$("#stream-index").hide(0);return $("#info-content").show(0,function(){return $("html, body").animate({scrollTop:$("#content-nav").offset().top},600)})});$("a[href='#stream-index']").click(function(){$("#content-nav li a.active").removeClass("active");$("#content-nav li a[href='#stream-index']").addClass("active");$("#info-content").hide(0);return $("#stream-index").show(0,function(){return $("html, body").animate({scrollTop:$("#content-nav").offset().top},600)})});$("a.tweet-link").click(function(e){var t;e.preventDefault();t=$(this).attr("href");return window.open(t,"twitterwindow","height=450, width=550, top="+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")});$("a.fullscreen-link").click(function(){if(screenfull.enabled)return screenfull.toggle()});$("#main-nav").find(".fullscreen-link").tooltip({title:"Toggle Fullscreen",placement:"bottom"});$("#main-nav").find(".liveStreamCount").tooltip({title:"Click to View Full List",placement:"bottom"});$("#main-nav").find(".info-link").tooltip({title:"Click to Find Out More",placement:"bottom"});$("a[data-chat='irc']").tooltip({title:"View IRC Chat",placement:"bottom"});return $(".footer-logo").popover()};initIndex=function(){var e,t,n,r;n=$("#index-template").html();r=Handlebars.compile(n);e={users:users};t=r(e);$("#stream-container").append(t);$(".index-entry:nth-child(4n+5)").css("clear","both");$(".index-entry").each(function(){return refreshStream($(this).attr("data-channel"))});return setTimeout(refreshAlerts,1e4)};refreshAlerts=function(){var e,t,n;if(newAlerts.length===0)return $("#liveAlerts").fadeOut("fast",function(){return setTimeout(refreshAlerts,STREAM_UPDATE_RATE)});n=$("#liveAlerts");t=n.find("p").eq(0);e=newAlerts.shift();return $("#liveAlerts").fadeIn("fast",function(){return t.hide().html(e).fadeIn("fast").delay(3e3).fadeOut("fast",function(){return refreshAlerts()})})};refreshStream=function(e){return $.ajax({type:"GET",dataType:"jsonp",crossDomain:!0,jsonp:"callback",url:STREAM_API_URL+e,success:function(t){var n,r,i,s,o,u;u=t.stream;r=$("div[data-channel='"+e+"']");s=r.find(".gb-username").text();o=r.find("p.live").hasClass("on-air")?!0:!1;if(u===null&&o===!0){r.removeClass("on-air");r.find("p.live").removeClass("on-air");r.find(".stream-pic").removeClass("on-air");r.find("h2").text("Off-Air");r.find(".game-title").text("nothing at the moment");$("#stream-container").append(r);$(".index-entry").css("clear","none");$(".index-entry:nth-child(4n+5)").css("clear","both");--onAirStreamCount;return refreshOnAirCount()}if(u!==null&&o===!1){r.addClass("on-air");r.find("p.live").addClass("on-air");r.find(".stream-pic").addClass("on-air");r.find("h2").text(u.channel.status);r.find(".stream-pic").attr("src",u.preview.medium);r.find(".game-title").text(u.channel.game);$("#stream-container").prepend(r);$(".index-entry").css("clear","none");$(".index-entry:nth-child(4n+5)").css("clear","both");++onAirStreamCount;refreshOnAirCount();n="<strong>"+s+"</strong> is now LIVE playing "+u.channel.game;return newAlerts.push(n)}if(u!==null){i=r.find(".game-title").text();r.find("h2").text(u.channel.status);r.find(".stream-pic").attr("src",u.preview.medium);r.find(".game-title").text(u.channel.game);if(i!==u.channel.game){n="<strong>"+s+"</strong> switched to playing "+u.channel.game;return newAlerts.push(n)}}},complete:setTimeout(function(){return refreshStream(e)},STREAM_UPDATE_RATE)})};refreshOnAirCount=function(){return onAirStreamCount>0?$(".liveStreamCount").html(onAirStreamCount+' Streams Are <span class="on-air-count">LIVE!</span> <i class="fa fa-chevron-circle-down"></i>'):$(".liveStreamCount").html("Live Streams")};doResize=function(){return setupLayout(currentLayout)};setCoords=function(){var e,t,n,r,i;$("#chat1").is(":visible")?CHAT_WIDTH=300:CHAT_WIDTH=0;WIDTH_LARGE=$("#streams-wrapper").width()-CHAT_WIDTH;HEIGHT_LARGE=WIDTH_LARGE*9/16+28;WIDTH_MED=$("#streams-wrapper").width()/2;HEIGHT_MED=WIDTH_MED*9/16+28;WIDTH_SMALL=WIDTH_LARGE/2;HEIGHT_SMALL=WIDTH_SMALL*9/16+28;if(currentLayout==="threeUpHorizontal"){WIDTH_SMALL=300;HEIGHT_SMALL=200;WIDTH_LARGE=$("#streams-wrapper").width()-WIDTH_SMALL;HEIGHT_LARGE=WIDTH_LARGE*9/16+28}t=0;currentLayout==="threeUp"?t=HEIGHT_LARGE+HEIGHT_SMALL:currentLayout==="threeUpHorizontal"?t=HEIGHT_LARGE:currentLayout==="oneUp"?t=HEIGHT_LARGE:t=HEIGHT_MED*2;r=$("#streams-wrapper").position().top;i=$(window).height();if(r+t>i){e=i-r;n=e/t;HEIGHT_LARGE*=n;WIDTH_LARGE=(HEIGHT_LARGE-28)*16/9;WIDTH_MED=(HEIGHT_MED-28)*16/9;HEIGHT_MED*=n;WIDTH_SMALL=WIDTH_LARGE/2;HEIGHT_SMALL=WIDTH_SMALL*9/16+28;CHAT_WIDTH=$("#streams-wrapper").width()-WIDTH_LARGE}return layouts={grid:{stream1:{x:0,y:0,width:WIDTH_MED,height:HEIGHT_MED},stream2:{x:WIDTH_MED,y:0,width:WIDTH_MED,height:HEIGHT_MED},stream3:{x:0,y:HEIGHT_MED,width:WIDTH_MED,height:HEIGHT_MED},chat1:{x:WIDTH_MED,y:HEIGHT_MED+CHAT_TAB_HEIGHT,width:WIDTH_MED,height:HEIGHT_MED-CHAT_TAB_HEIGHT-8},chat2:{x:WIDTH_MED,y:HEIGHT_MED+CHAT_TAB_HEIGHT,width:WIDTH_MED,height:HEIGHT_MED-CHAT_TAB_HEIGHT-8},chatnav:{x:WIDTH_MED,y:HEIGHT_MED,width:WIDTH_MED,height:CHAT_TAB_HEIGHT},overallHeight:HEIGHT_MED*2},oneUp:{stream1:{x:0,y:0,width:WIDTH_LARGE,height:HEIGHT_LARGE},chat1:{x:WIDTH_LARGE,y:CHAT_TAB_HEIGHT,width:CHAT_WIDTH,height:HEIGHT_LARGE-CHAT_TAB_HEIGHT-8},chat2:{x:WIDTH_LARGE,y:CHAT_TAB_HEIGHT,width:CHAT_WIDTH,height:HEIGHT_LARGE-CHAT_TAB_HEIGHT-8},chatnav:{x:WIDTH_LARGE,y:0,width:CHAT_WIDTH,height:CHAT_TAB_HEIGHT},overallHeight:HEIGHT_LARGE},threeUp:{stream1:{x:0,y:0,width:WIDTH_LARGE,height:HEIGHT_LARGE},stream2:{x:0,y:HEIGHT_LARGE,width:WIDTH_SMALL,height:HEIGHT_SMALL},stream3:{x:WIDTH_SMALL,y:HEIGHT_LARGE,width:WIDTH_SMALL,height:HEIGHT_SMALL},chat1:{x:WIDTH_LARGE,y:CHAT_TAB_HEIGHT,width:CHAT_WIDTH,height:HEIGHT_LARGE+HEIGHT_SMALL-CHAT_TAB_HEIGHT-8},chat2:{x:WIDTH_LARGE,y:CHAT_TAB_HEIGHT,width:CHAT_WIDTH,height:HEIGHT_LARGE+HEIGHT_SMALL-CHAT_TAB_HEIGHT-8},chatnav:{x:WIDTH_LARGE,y:0,width:CHAT_WIDTH,height:CHAT_TAB_HEIGHT},overallHeight:HEIGHT_LARGE+HEIGHT_SMALL},twoUp:{stream1:{x:0,y:0,width:WIDTH_MED,height:HEIGHT_MED},stream2:{x:0,y:HEIGHT_MED,width:WIDTH_MED,height:HEIGHT_MED},chat1:{x:WIDTH_MED,y:CHAT_TAB_HEIGHT,width:WIDTH_MED,height:HEIGHT_MED*2-CHAT_TAB_HEIGHT-8},chat2:{x:WIDTH_MED,y:CHAT_TAB_HEIGHT,width:WIDTH_MED,height:HEIGHT_MED*2-CHAT_TAB_HEIGHT-8},chatnav:{x:WIDTH_MED,y:0,width:WIDTH_MED,height:CHAT_TAB_HEIGHT},overallHeight:HEIGHT_MED*2}}};setupLayout=function(e){currentLayout=e;setCoords();layoutPlayerSlot("stream1");layoutPlayerSlot("stream2");layoutPlayerSlot("stream3");layoutChat("chat1");layoutChat("chat2");layoutChatNav("chatnav");return $("#streams-wrapper").height(layouts[currentLayout].overallHeight)};layoutChat=function(e){var t;t=layouts[currentLayout][e];e=$("#"+e);if(t){e.css("left",t.x);e.css("top",t.y);e.width(t.width);return e.height(t.height)}};layoutChatNav=function(e){var t,n;t=layouts[currentLayout][e];e=$("#"+e);n=$("#liveAlerts");if(t){e.css("left",t.x);e.css("top",t.y);e.width(t.width);e.height(t.height);n.css("left",t.x);n.css("top",t.y);n.width(t.width);return n.height(t.height)}};toggleChat=function(){$("#chat1").toggle();return layout(currentLayout)};layoutPlayerSlot=function(e){var t,n,r,i,s;n=layouts[currentLayout][e];s=$("#"+e);i=$("#"+e+"Overlay");r=e.charAt(e.length-1);t=$('a[data-chat="'+e+'"]');if(n){if(s.is("div")){addPlayer(playerChannels[e],e);s=$("#"+e)}s.css("left",n.x);s.css("top",n.y);s.width(n.width);s.height(n.height);i.css("left",n.x);i.css("top",n.y);i.width(n.width);i.height(n.height-30);i.attr("data-original-title",r+": "+playerChannels[e]);i.tooltip("fixTitle");i.show();t.attr("data-original-title","View "+playerChannels[e]+"'s Twitch Chat");return t.tooltip("fixTitle")}removePlayer(s);return i.hide()};layoutElement=function(e,t){if(t){e.css("left",t.x);e.css("top",t.y);e.width(t.width);e.height(t.height);return e.show()}return e.hide()};embedPlayer=function(e,t){flashvars.channel=e;flashvars.initCallback=t+"Loaded";return swfobject.embedSWF(PLAYER_URL,t,"100","100","9.0.0","expressInstall.swf",flashvars,params,attributes)};addPlayer=function(e,t){return embedPlayer(e,t)};removePlayer=function(e){var t,n;n=e.attr("id");t="<div id='"+n+"'></div>";return e.replaceWith(t)};stream1Loaded=function(){var e;e=$("#stream1")[0];e.playVideo();return e.unmute()};stream2Loaded=function(){var e;e=$("#stream2")[0];e.playVideo();return e.mute()};stream3Loaded=function(){var e;e=$("#stream3")[0];e.playVideo();return e.mute()};updateTotal=function(){return $.ajax({type:"GET",url:"http://www.extra-life.org/index.cfm?fuseaction=widgets.300x250thermo&teamID=10592",success:function(e){var t;t=$(e.responseText).find("#mercury em").text();return $("#total-value").text(t)},complete:function(){return setTimeout(updateTotal,TOTAL_UPDATE_RATE)}})};swapStream=function(e,t){var n,r;if(playerChannels[e]!==t){for(n in playerChannels){r=playerChannels[n];if(t!==r)continue;playerChannels[n]=playerChannels[e];removePlayer($("#"+n))}playerChannels[e]=t;removePlayer($("#"+e));return setupLayout(currentLayout)}};loadChat=function(e){var t;t=e;if(e!=="irc"){e=playerChannels[e];$("#chat1").hide();$("#chat2").show()}else{$("#chat2").hide();$("#chat1").show()}if(e!==currentChat&&e!=="irc"){document.getElementById("chat2").src=getChatUrl(e);currentChat=e}$("#chatnav ul li a.active").removeClass("active");return $("#chatnav ul li a[data-chat='"+t+"']").addClass("active")};getChatUrl=function(e){var t;t="";e==="irc"?t=IRC_URL:t="http://www.twitch.tv/chat/embed?channel="+e+"&popout_chat=true";return t};getURLParameter=function(e){return decodeURIComponent(((new RegExp("[?|&]"+e+"=([^&;]+?)(&|##|;|$)")).exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||null};$(window).load(function(){initPage();initEvents();return initIndex()});$(window).resize(function(){return doResize()});